<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Сообщить о нарушении парковки автомобилей</title>
    <link rel="shortcut icon" href="/img/favicon-5.ico" type="image/x-icon" />
    <meta name="description" content="on-line сервис Комитета по транспорту" />
    <meta property="og:url" content="#" />
    <meta
      property="og:title"
      content="Сообщить о нарушении парковки автомобилей"
    />
    <meta
      property="og:description"
      content="on-line сервис Комитета по транспорту"
    />
    <meta property="og:type" content="website" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="canonical" href="#" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&amp;family=IBM+Plex+Serif:wght@300;400;500;600;700&amp;subset=latin,cyrillic"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <noscript>Enable JavaScript in your browser</noscript>
    <script
      defer
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    ></script>
    <script defer type="text/javascript" src="/js/main.js"></script>
  </head>
  <body>
    <div class="contaner">
      <div class="header">
        <img class="logo" src="./img/photo.jpg" alt="logo" />
        <h1>
          Правительство <br />
          Санкт-Петербурга <br />
          Комитет по транспорту
        </h1>
        <div class="social_icon">
          <a
            href="https://vk.com/passtransportspb"
            target="_blank"
            rel="noopener"
          >
            <svg
              class="t-sociallinks__svg"
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              width="30px"
              height="30px"
              viewBox="0 0 48 48"
              enable-background="new 0 0 48 48"
              xml:space="preserve"
            >
              <desc>VK</desc>
              <path
                style="fill: #a0daf7"
                d="M47.761,24c0,13.121-10.639,23.76-23.76,23.76C10.878,47.76,0.239,37.121,0.239,24c0-13.123,10.639-23.76,23.762-23.76C37.122,0.24,47.761,10.877,47.761,24 M35.259,28.999c-2.621-2.433-2.271-2.041,0.89-6.25c1.923-2.562,2.696-4.126,2.45-4.796c-0.227-0.639-1.64-0.469-1.64-0.469l-4.71,0.029c0,0-0.351-0.048-0.609,0.106c-0.249,0.151-0.414,0.505-0.414,0.505s-0.742,1.982-1.734,3.669c-2.094,3.559-2.935,3.747-3.277,3.524c-0.796-0.516-0.597-2.068-0.597-3.171c0-3.449,0.522-4.887-1.02-5.259c-0.511-0.124-0.887-0.205-2.195-0.219c-1.678-0.016-3.101,0.007-3.904,0.398c-0.536,0.263-0.949,0.847-0.697,0.88c0.31,0.041,1.016,0.192,1.388,0.699c0.484,0.656,0.464,2.131,0.464,2.131s0.282,4.056-0.646,4.561c-0.632,0.347-1.503-0.36-3.37-3.588c-0.958-1.652-1.68-3.481-1.68-3.481s-0.14-0.344-0.392-0.527c-0.299-0.222-0.722-0.298-0.722-0.298l-4.469,0.018c0,0-0.674-0.003-0.919,0.289c-0.219,0.259-0.018,0.752-0.018,0.752s3.499,8.104,7.573,12.23c3.638,3.784,7.764,3.36,7.764,3.36h1.867c0,0,0.566,0.113,0.854-0.189c0.265-0.288,0.256-0.646,0.256-0.646s-0.034-2.512,1.129-2.883c1.15-0.36,2.624,2.429,4.188,3.497c1.182,0.812,2.079,0.633,2.079,0.633l4.181-0.056c0,0,2.186-0.136,1.149-1.858C38.281,32.451,37.763,31.321,35.259,28.999"
              ></path>
            </svg>
          </a>
        </div>
      </div>

      <img class="picture" src="./img/1.jpg" alt="Picture" />

      <form
        id="form-contact"
        method="POST"
        class="contact-form"
        autocomplete="off"
        enctype="multipart/form-data"
        action="telegramm.php"
      >
        <div class="text">
          <h2>
            Сообщить о нарушении правил парковки <br />
            в зоне действия знаков "остановка и стоянка запрещена"
          </h2>
        </div>
        <div class="text">
          <h2>Укажите место нарушения на карте</h2>
          <div class="block__info">
            <input
              type="text"
              class="info__address"
              name="address"
              id="address"
              required
              placeholder="Укажите точку на карте"
              disabled
            />
            <input
              type="hidden"
              class="form-control"
              name="coord_map"
              id="coord_map"
            />
            <input
              type="hidden"
              class="form-control"
              name="dist_check"
              id="dist_check"
            />
            <select class="info__select" id="map_district" name="map_district">
              <option value="">Выберите район...</option>
              <option value="Адмиралтейский">Адмиралтейский</option>
              <option value="Василеостровский">Василеостровский</option>
              <option value="Выборгский">Выборгский</option>
              <option value="Калининский">Калининский</option>
              <option value="Кировский">Кировский</option>
              <option value="Колпинский">Колпинский</option>
              <option value="Красногвардейский">Красногвардейский</option>
              <option value="Красносельский">Красносельский</option>
              <option value="Кронштадтский">Кронштадтский</option>
              <option value="Курортный">Курортный</option>
              <option value="Московский">Московский</option>
              <option value="Невский">Невский</option>
              <option value="Петроградский">Петроградский</option>
              <option value="Петродворцовый">Петродворцовый</option>
              <option value="Приморский">Приморский</option>
              <option value="Пушкинский">Пушкинский</option>
              <option value="Фрунзенский">Фрунзенский</option>
              <option value="Центральный">Центральный</option>
            </select>
            <div id="pYMapsID" class="info__map"></div>
            <script
              type="text/javascript"
              src="https://api-maps.yandex.ru/2.1/?apikey=41edf358-0ea2-478c-bc2f-52f82bba205e&lang=ru_RU"
            ></script>
            <script language="JavaScript" type="text/javascript">
              ymaps.ready(init);
              function init() {
                var myPlacemark,
                  myMap = new ymaps.Map(
                    "pYMapsID",
                    {
                      center: [59.93926, 30.34878],
                      zoom: 14,
                      controls: [],
                    },
                    {
                      searchControlProvider: "yandex#search",
                    }
                  );
                myMap.behaviors.enable("scrollZoom");
                var RulerControl = new ymaps.control.RulerControl({
                  options: {
                    float: "none",
                    position: { left: 20, bottom: 40 },
                  },
                });
                myMap.controls.add(RulerControl);
                myMap.controls.add("zoomControl");
                myMap.controls.add("typeSelector");
                var SearchControl = new ymaps.control.SearchControl({
                  options: {
                    float: "none",
                    size: "medium",
                    boundedBy: [
                      [59, 31],
                      [60, 28],
                    ],
                    position: { left: 10, top: 10 },
                  },
                });
                myMap.controls.add(SearchControl);
                myMap.events.add("click", function (e) {
                  var coords = e.get("coords");
                  if (myPlacemark) {
                    myPlacemark.geometry.setCoordinates(coords);
                  } else {
                    myPlacemark = createPlacemark(coords);
                    myMap.geoObjects.add(myPlacemark);
                    myPlacemark.events.add("dragend", function () {
                      getAddress(myPlacemark.geometry.getCoordinates());
                    });
                  }
                  getAddress(coords);
                  $("#address").removeAttr("disabled");
                });
                function createPlacemark(coords) {
                  return new ymaps.Placemark(
                    coords,
                    {
                      iconCaption: "поиск...",
                    },
                    {
                      preset: "islands#violetDotIconWithCaption",
                      draggable: true,
                    }
                  );
                }
                function getAddress(coords) {
                  myPlacemark.properties.set("iconCaption", "поиск...");

                  let district_array = [
                    "Адмиралтейский",
                    "Василеостровский",
                    "Выборгский",
                    "Калининский",
                    "Кировский",
                    "Колпинский",
                    "Красногвардейский",
                    "Красносельский",
                    "Кронштадтский",
                    "Курортный",
                    "Московский",
                    "Невский",
                    "Петроградский",
                    "Петродворцовый",
                    "Приморский",
                    "Пушкинский",
                    "Фрунзенский",
                    "Центральный",
                  ];

                  ymaps
                    .geocode(coords, { kind: "district" })
                    .then(function (res) {
                      let district = res.geoObjects.get(0);
                      let district_adress = district
                        .getAddressLine(name)
                        .toString();
                      //console.log(district.getAddressLine(name).toString());
                      for (n = 0; n < district_array.length; n++) {
                        let district_result = district_array[n];
                        if (district_adress.indexOf(district_result) !== -1) {
                          document.getElementById("map_district").value =
                            district_result;
                          break;
                        } else {
                          document.getElementById("map_district").value = "";
                        }
                      }
                    });

                  ymaps.geocode(coords).then(function (res) {
                    var firstGeoObject = res.geoObjects.get(0);
                    myPlacemark.properties.set({
                      iconCaption: [
                        firstGeoObject.getLocalities().length
                          ? firstGeoObject.getLocalities()
                          : firstGeoObject.getAdministrativeAreas(),
                        firstGeoObject.getThoroughfare() ||
                          firstGeoObject.getPremise(),
                      ]
                        .filter(Boolean)
                        .join(", "),
                      balloonContent: firstGeoObject.getAddressLine(),
                    });

                    var adress = firstGeoObject.getAddressLine(name).toString();
                    document.getElementById("address").value = adress;
                    document.getElementById("coord_map").value = coords;
                  });
                }
              }
            </script>
          </div>
          <div class="block__content-name">
            <h2>Прикрепите фотографию нарушения</h2>
            <div class="input-file-container block__info">
              <input
                class="input-file"
                name="file[]"
                size="5"
                multiple="true"
                id="file"
                accept="image/png,image/jpeg,image/jpg,video/mp4,video/flv"
                type="file"
                onchange="info_upd(this, 1)"
              />
              <label tabindex="0" for="file" class="input-file-trigger"
                >Обзор...</label
              >
            </div>
            <p class="file-return"></p>
          </div>
          <div class="block__content-name">
            <h2>Напишите комментарий</h2>
            <div class="block__info">
              <textarea
                name="comment"
                id="comment"
                rows="5"
                class="comment"
                placeholder="Комментарий..."
              ></textarea>
            </div>
          </div>
          <div class="block__content-name">
            <div class="block__info _send">
              <button
                class="button"
                id="btn"
                type="submit"
                onclick="return FormValidator();"
              >
                Отправить
              </button>
            </div>
          </div>
        </div>
        <div class="block__loader">
          <div id="loader"></div>
        </div>
        <div id="modal__complete" class="modal">
          <div class="modal-content">
            <div class="modal-header">
              <span class="close">×</span>
            </div>
            <div class="modal-body">
              <p>
                Информация принята и будет учтена при составлении маршрутов
                мониторинга!
              </p>
              <h3></h3>
            </div>
            <div class="modal-footer"></div>
          </div>
        </div>
        <div id="modal__alert" class="modal">
          <div class="modal-content">
            <div class="modal-header-alert">
              <span class="close__alert">×</span>
            </div>
            <div id="modal__body-alert" class="modal-body">
              <p></p>
              <p class="contact-form__message"></p>
            </div>
            <div class="modal-footer-alert"></div>
          </div>
        </div>
      </form>

      <div class="adress">
        <h2>Комитет по транспорту</h2>
        1. Территориальный отдел Центральный<br />Адрес: Санкт-Петербург, 8-я
        Советская ул., д. 31/27<br />Режим работы: круглосуточно<br /><br />2.
        Территориальный отдел Северный<br />Адрес: Санкт-Петербург, пр.
        Просвещения, д. 54<br />Режим работы: круглосуточно<br /><br />3.
        Территориальный отдел Правобережный<br />Адрес: Санкт-Петербург, ул.
        Синявинская, д. 3<br />Режим работы: круглосуточно<br /><br />4.
        Территориальный отдел Южный<br />Санкт-Петербург, пр. Ветеранов, д.
        131<br />Режим работы: круглосуточно<br /><br />
        e-mail:
        <a href="mailto:public@transport.gov.spb.ru"
          >public@transport.gov.spb.ru</a
        >
      </div>

      <div class="map">
        <script
          type="text/javascript"
          charset="utf-8"
          async
          src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A888cf251065814a313f0ef8e3a14f44b336fe6fda480c8d98baae978d877a2c7&amp;width=100%25&amp;height=240&amp;lang=ru_RU&amp;scroll=true"
        ></script>
      </div>

      <footer class="footer">
        <div class="text-center">
          <small class="copyright"> &copy; 2021 Copyright</small>
        </div>
      </footer>
    </div>
  </body>
</html>
